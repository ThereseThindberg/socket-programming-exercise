import socket

def create_client_socket():
    return socket.socket(socket.AF_INET, socket.SOCK_STREAM)

def connect_to_server(sock, host, port):
    server_address = (host, port)
    sock.connect(server_address)

def send_data(sock, message):
    sock.sendall(message.encode())

def recieve_data(sock, buffer_size = 4096):
    return sock.recv(buffer_size)
 

def main():
    host = '127.0.0.1'
    port = 65432
    message = "Hello, world"
    try:
        sock = create_client_socket()
        connect_to_server(sock, host, port)
        send_data(sock, message)
        response = recieve_data(sock)
        print("Received data from server:")
        print(response.decode(errors='ignore'))
    except Exception as e:
        print(f"An error occurred: {e}")
    finally:
        sock.close()

if __name__ == "__main__":
    main()